# -*- coding: utf-8 -*-
# default PROXY_TARGET is ('127.0.0.1', 8086), if you want to generate pac with
# other address, please modify PROXY_TARGET, if not, keep it default.
PROXY_TARGET = ('127.0.0.1', 8086)

# DO NOT MODIFY CODE BELOW!!
listen_port = 0
def config():
    import sys
    set_hosts = import_from('util')
    set_hosts('.googlecode.com', '203.208.46.1 203.208.46.2 203.208.46.3 203.208.46.4 203.208.46.5 203.208.46.6 203.208.46.7 203.208.46.8')
    files = sys.argv[2:]
    if files:
        try:
            del httpd.__class__.server_address
        except AttributeError:
            pass
        default = eval('KCcxMjcuMC4wLjEnLDgwODYp'.decode('base64'))
        if config['PROXY_TARGET'] != default:
            httpd.server_address = config['PROXY_TARGET']
        else:
            from os.path import dirname, join
            try:
                execfile(join(dirname(config['__file__']), 'config.py'), config)
            except:
                pass
            httpd.server_address = config.vget(str, 'listen_ip', default[0]) or '0.0.0.0', config.vget(int, 'listen_port', default[1])
        PacFile = import_from('pac')
        rulelist = ['http://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt', 'userlist.ini']
        PacFile([[rulelist, 'PROXY *:*; DIRECT']], [], files)
